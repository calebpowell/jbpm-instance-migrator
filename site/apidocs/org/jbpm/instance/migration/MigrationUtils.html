<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_22) on Mon Nov 29 20:13:33 EST 2010 -->
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<TITLE>
MigrationUtils (jBPM Instance Migrator 0.2-SNAPSHOT API)
</TITLE>

<META NAME="date" CONTENT="2010-11-29">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="MigrationUtils (jBPM Instance Migrator 0.2-SNAPSHOT API)";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/MigrationUtils.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../org/jbpm/instance/migration/MigrationComparator.html" title="class in org.jbpm.instance.migration"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../org/jbpm/instance/migration/Migrator.html" title="class in org.jbpm.instance.migration"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?org/jbpm/instance/migration/MigrationUtils.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="MigrationUtils.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
org.jbpm.instance.migration</FONT>
<BR>
Class MigrationUtils</H2>
<PRE>
java.lang.Object
  <IMG SRC="../../../../resources/inherit.gif" ALT="extended by "><B>org.jbpm.instance.migration.MigrationUtils</B>
</PRE>
<HR>
<DL>
<DT><PRE>public class <B>MigrationUtils</B><DT>extends java.lang.Object</DL>
</PRE>

<P>
Provides utility methods to the Migrator class.
<P>

<P>
<DL>
<DT><B>Author:</B></DT>
  <DD>Caleb Powell <caleb.powell@gmail.com>, David Harcombe <david.harcombe@intelliware.ca></DD>
<DT><B>See Also:</B><DD><A HREF="../../../../org/jbpm/instance/migration/Migrator.html" title="class in org.jbpm.instance.migration"><CODE>Migrator</CODE></A></DL>
<HR>

<P>

<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../../org/jbpm/instance/migration/MigrationUtils.html#MigrationUtils()">MigrationUtils</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;org.jbpm.graph.def.ProcessDefinition</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/jbpm/instance/migration/MigrationUtils.html#findLatestProcessDefinition(java.lang.String, org.jbpm.JbpmContext)">findLatestProcessDefinition</A></B>(java.lang.String&nbsp;processName,
                            org.jbpm.JbpmContext&nbsp;jbpmContext)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Used to find a <CODE>ProcessDefinition</CODE> by it's name.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;org.jbpm.graph.def.ProcessDefinition</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/jbpm/instance/migration/MigrationUtils.html#getProcessDefinition(java.lang.String)">getProcessDefinition</A></B>(java.lang.String&nbsp;filename)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Convert an xml file into a valid jBPM ProcessDefinition class</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;<A HREF="../../../../org/jbpm/instance/migration/DynamicMigration.html" title="interface in org.jbpm.instance.migration">DynamicMigration</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/jbpm/instance/migration/MigrationUtils.html#lookupDynamicMigration(java.lang.String)">lookupDynamicMigration</A></B>(java.lang.String&nbsp;migrationClassName)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;<A HREF="../../../../org/jbpm/instance/migration/Migration.html" title="interface in org.jbpm.instance.migration">Migration</A>[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/jbpm/instance/migration/MigrationUtils.html#lookupMigrationsFor(java.lang.String)">lookupMigrationsFor</A></B>(java.lang.String&nbsp;baseClassName)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Taking a base class name, this method will search the Classpath for all Migrations that begin with that name.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/jbpm/instance/migration/MigrationUtils.html#parseClassNameFromDynamicNode(java.lang.String)">parseClassNameFromDynamicNode</A></B>(java.lang.String&nbsp;dynamicNodeName)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Convenience method to parse the Class name from a dynamic node name.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/jbpm/instance/migration/MigrationUtils.html#requiresMigration(org.jbpm.graph.exe.ProcessInstance, org.jbpm.JbpmContext)">requiresMigration</A></B>(org.jbpm.graph.exe.ProcessInstance&nbsp;processInstance,
                  org.jbpm.JbpmContext&nbsp;jbpmContext)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Used to determine whether a ProcessInstance requires migration.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.Object</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="MigrationUtils()"><!-- --></A><H3>
MigrationUtils</H3>
<PRE>
public <B>MigrationUtils</B>()</PRE>
<DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="getProcessDefinition(java.lang.String)"><!-- --></A><H3>
getProcessDefinition</H3>
<PRE>
public static org.jbpm.graph.def.ProcessDefinition <B>getProcessDefinition</B>(java.lang.String&nbsp;filename)
                                                                 throws java.io.IOException</PRE>
<DL>
<DD>Convert an xml file into a valid jBPM ProcessDefinition class
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>filename</CODE> - The xml file containing the ProcessDefinition definition
<DT><B>Returns:</B><DD>A ProcessDefinition
<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="lookupMigrationsFor(java.lang.String)"><!-- --></A><H3>
lookupMigrationsFor</H3>
<PRE>
public static <A HREF="../../../../org/jbpm/instance/migration/Migration.html" title="interface in org.jbpm.instance.migration">Migration</A>[] <B>lookupMigrationsFor</B>(java.lang.String&nbsp;baseClassName)</PRE>
<DL>
<DD>Taking a base class name, this method will search the Classpath for all Migrations that begin with that name. The migrations will be returned
 in an array. For example, given the base Class name 'com.foo.BarMigration', this method will attempt to load classes named 
 'com.foo.BarMigration001', 'com.foo.BarMigration002', 'com.foo.BarMigration003', etc. It will stop loading when it catches a <CODE>ClassNotFoundException</CODE>.
  
 Valid Migration classes must implement the <A HREF="../../../../org/jbpm/instance/migration/Migration.html" title="interface in org.jbpm.instance.migration"><CODE>Migration</CODE></A> interface (but not be an interface themselves), have a default constructor, and cannot be abstract.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>baseClassName</CODE> - 
<DT><B>Returns:</B><DD></DL>
</DD>
</DL>
<HR>

<A NAME="requiresMigration(org.jbpm.graph.exe.ProcessInstance, org.jbpm.JbpmContext)"><!-- --></A><H3>
requiresMigration</H3>
<PRE>
public static boolean <B>requiresMigration</B>(org.jbpm.graph.exe.ProcessInstance&nbsp;processInstance,
                                        org.jbpm.JbpmContext&nbsp;jbpmContext)</PRE>
<DL>
<DD>Used to determine whether a ProcessInstance requires migration.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>processInstance</CODE> - 
<DT><B>Returns:</B><DD>true if the processInstance (or any of it's subProcessInstance's) belongs to an outdated processDefinition.</DL>
</DD>
</DL>
<HR>

<A NAME="findLatestProcessDefinition(java.lang.String, org.jbpm.JbpmContext)"><!-- --></A><H3>
findLatestProcessDefinition</H3>
<PRE>
public static org.jbpm.graph.def.ProcessDefinition <B>findLatestProcessDefinition</B>(java.lang.String&nbsp;processName,
                                                                               org.jbpm.JbpmContext&nbsp;jbpmContext)</PRE>
<DL>
<DD>Used to find a <CODE>ProcessDefinition</CODE> by it's name.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>processName</CODE> - The name of the process definition.<DD><CODE>jbpmContext</CODE> - 
<DT><B>Returns:</B><DD></DL>
</DD>
</DL>
<HR>

<A NAME="lookupDynamicMigration(java.lang.String)"><!-- --></A><H3>
lookupDynamicMigration</H3>
<PRE>
public static <A HREF="../../../../org/jbpm/instance/migration/DynamicMigration.html" title="interface in org.jbpm.instance.migration">DynamicMigration</A> <B>lookupDynamicMigration</B>(java.lang.String&nbsp;migrationClassName)</PRE>
<DL>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>className</CODE> - 
<DT><B>Returns:</B><DD></DL>
</DD>
</DL>
<HR>

<A NAME="parseClassNameFromDynamicNode(java.lang.String)"><!-- --></A><H3>
parseClassNameFromDynamicNode</H3>
<PRE>
public static java.lang.String <B>parseClassNameFromDynamicNode</B>(java.lang.String&nbsp;dynamicNodeName)</PRE>
<DL>
<DD>Convenience method to parse the Class name from a dynamic node name. This method expects the 
 <i>dynamicNodeName</i> parameter to be in the format <i>java://{class name}</i>.
 
 This method delegates to the org.apache.commons.lang.StringUtils.substringAfter() method. When given a 
 <code>null</code> string input will return <code>null</code>. An empty ("") string input will return the 
 empty string. A <code>null</code> separator will return the empty string if the input string is not <code>null</code>.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>dynamicNodeName</CODE> - 
<DT><B>Returns:</B><DD></DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/MigrationUtils.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../org/jbpm/instance/migration/MigrationComparator.html" title="class in org.jbpm.instance.migration"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../org/jbpm/instance/migration/Migrator.html" title="class in org.jbpm.instance.migration"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?org/jbpm/instance/migration/MigrationUtils.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="MigrationUtils.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>
Copyright &#169; 2010 JBoss Inc.. All Rights Reserved.
</BODY>
</HTML>
